From 2dbc1a70849710bbc17c654dbd7f629ab1a66433 Mon Sep 17 00:00:00 2001
From: Manoj Srivastava <srivasta@golden-gryphon.com>
Date: Mon, 28 Apr 2014 16:24:32 -0700
Subject: [PATCH 1/1] debcherry fixup patch

fc23530 [fix-texinfo-warnings]: More tecinfo warning fixes
	 - no changes against upstream or conflicts
c4c2399 [fix-texinfo-warnings]: This fixes a FTBS issue
	 - extra changes or conflicts
6dc310e [topc--base64fix]: base64_decode_multichunk_and_speedup.diff
	 - no changes against upstream or conflicts
53a7df0 [topic--debian]: Added manual pages for all binaries.
	 - extra changes or conflicts
2020262 Make sure the autoloads files are generated in the right place
	 - no changes against upstream or conflicts
7662c40 [topic--debian]: Do not rely on absolute path
	 - extra changes or conflicts
---
 info/vm-pcrisis.texinfo |   2 +-
 info/vm.texinfo         | 419 ++++++++++++++++++++++++------------------------
 lisp/Makefile.in        |   4 +-
 src/Makefile.in         |   9 ++
 src/base64-decode.1     |  50 ++++++
 src/base64-decode.c     | 105 +++++++-----
 src/base64-encode.1     |  51 ++++++
 src/base64-encode.c     |   3 +-
 src/qp-decode.1         |  51 ++++++
 src/qp-decode.c         |   9 +-
 src/qp-encode.1         |  51 ++++++
 src/qp-encode.c         |   5 +-
 12 files changed, 497 insertions(+), 262 deletions(-)
 create mode 100644 src/base64-decode.1
 create mode 100644 src/base64-encode.1
 create mode 100644 src/qp-decode.1
 create mode 100644 src/qp-encode.1

diff --git a/info/vm-pcrisis.texinfo b/info/vm-pcrisis.texinfo
index fa2342c..72b8cfa 100755
--- a/info/vm-pcrisis.texinfo
+++ b/info/vm-pcrisis.texinfo
@@ -1179,7 +1179,7 @@ bear this in mind when you set up the profiles!
 
 @c ***************************************************************************
 
-@unnumberedsubsec vmpc-auto-profiles-file
+@unnumberedsec vmpc-auto-profiles-file
 @vindex vmpc-auto-profiles-file
 
 The variable @code{vmpc-auto-profiles-file} contains the name of the
diff --git a/info/vm.texinfo b/info/vm.texinfo
index 7e06dae..5a03949 100755
--- a/info/vm.texinfo
+++ b/info/vm.texinfo
@@ -160,7 +160,7 @@ in mail-reading functionality by introducing features like thread
 management, virtual folders, automatic archiving of messages and a
 full treatment of @acronym{MIME}.  VM can interface to other packages
 available in Emacs, for remote file access, @acronym{BBDB} address book,
-@acronym{GPG} 
+@acronym{GPG}
 encryption and Org mode task management etc.  It can also invoke
 external utilities available on your system such as mail filtering
 tools and html rendering tools.
@@ -275,7 +275,7 @@ that the next time the folder is visited VM will know which messages
 have been already read, replied to and so on.  Typing @kbd{S}
 (@code{vm-save-folder}) saves the folder.  The default behavior is
 that deleted messages are @emph{not} expunged automatically when you
-save a folder. 
+save a folder.
 The next time you visit the folder any deleted
 messages will still be flagged for deletion.  @pxref{Deleting Messages}.
 
@@ -393,7 +393,7 @@ settings.
 @cindex primary inbox
 @kbd{M-x vm} causes VM to visit a folder known as your @dfn{primary
 inbox}, specified by the variable @code{vm-primary-inbox}.  If the
-variable @code{vm-auto-get-new-mail} is set 
+variable @code{vm-auto-get-new-mail} is set
 non-@code{nil}, VM will gather any new mail that has arrived
 and integrate it into your primary inbox.  The default setting for your
 primary inbox is the local file @file{~/Mail/inbox}, but a variety of
@@ -415,7 +415,7 @@ treats server folders with equal facility.
 any local mail folder.  The folder name will be
 prompted for in the minibuffer.  @kbd{M-x vm-visit-pop-folder} and
 @kbd{M-x vm-visit-imap-folder} perform similar function for server
-folders. 
+folders.
 
 Once VM has read the folder and assimilated any new mail, the first new or
 unread message will be selected, if any.  If there is no such message,
@@ -501,7 +501,7 @@ VM transfers the mail from a spool file to a folder via a
 temporary file known as the @dfn{crash box}.  The variable
 @code{vm-crash-box} names the crash box file for the primary inbox.
 Or a crash-box name may be created from @code{vm-crash-box-suffix}
-described below. 
+described below.
 (@pxref{Spool Files}.)
 VM first copies the mail to the crash box, truncates the spool file
 to zero messages, merges the crash box contents into the
@@ -573,7 +573,7 @@ For example, you can set @code{vm-spool-files} like this
 @end example
 
 @noindent The folder @file{~/INBOX} has two spool files associated
-with it in this 
+with it in this
 example, @file{/var/spool/mail/kyle} and @file{~/Mailbox}.  Another
 folder, @file{"~/Mail/bugs"} has one spool file
 @file{/var/spool/mail/answerman} associated with it.  Note that both of
@@ -597,7 +597,7 @@ to be used to create possible spool file names for folders.  Example:
 @end example
 
 @noindent With @code{vm-spool-file-suffixes} set this way, if you
-visit a 
+visit a
 folder @file{~/mail/beekeeping}, when VM attempts to retrieve new mail for
 that folder it will look for mail in @file{~/mail/beekeeping.spool}
 and @file{~/mail/beekeeping-} in addition to scanning @code{vm-spool-files}
@@ -648,7 +648,7 @@ mailbox.  The retrieved messages can be automatically removed from the
 By default VM will retrieve all the messages from a @acronym{POP} mailbox
 before returning control of Emacs to you.  If the mailbox is
 large, the wait could be considerable.  If you set
-@code{vm-pop-max-message-size} to a positive numeric value, VM will not 
+@code{vm-pop-max-message-size} to a positive numeric value, VM will not
 automatically retrieve messages larger than this size.  If VM is
 retrieving messages because you invoked @code{vm-get-new-mail}
 interactively, then VM will ask whether it should retrieve the
@@ -717,7 +717,7 @@ Here is an example:
 @cindex @acronym{IMAP} spool files
 @cindex maildrop specification
 VM can also use @dfn{@acronym{IMAP}} (@dfn{Internet Message Access Protocol}) to
-retrieve mail from a mail server. 
+retrieve mail from a mail server.
 As with @acronym{POP}, instead of specifying a local file name in the
 @code{vm-spool-files} definition, you would give an @acronym{IMAP} maildrop
 specification (@ref{maildrop specification}, @ref{@acronym{POP} and @acronym{IMAP} Folders}).
@@ -838,7 +838,7 @@ order to quickly form the summary of the folder.
 
 @vindex vm-index-file-suffix
 To use this feature, set the variable @code{vm-index-file-suffix} to a
-file name extension, e.g., 
+file name extension, e.g.,
 
 @example
 (setq vm-index-file-suffix "idx")
@@ -914,7 +914,8 @@ following formats:
 
 @example
 ``pop:@var{HOST}:@var{PORT}:@var{AUTH}:@var{USER}:@var{PASSWORD}''
-``imap:@var{HOST}:@var{PORT}:@var{MAILBOX}:@var{AUTH}:@var{USER}:@var{PASSWORD}''@end example
+``imap:@var{HOST}:@var{PORT}:@var{MAILBOX}:@var{AUTH}:@var{USER}:@var{PASSWORD}''
+@end example
 
 @noindent Remote mailboxes accessed by VM in this fashion are referred
 to as @dfn{server folders} (and @dfn{@acronym{POP} folders} or @dfn{@acronym{IMAP}
@@ -952,7 +953,7 @@ have VM speak @acronym{POP} over an @acronym{SSL} connection.  Use
 replace @samp{imap} with @samp{imap-ssl} or @samp{imap-ssh}, as needed.
 
 @cindex @acronym{SSL}
-@cindex @acronym{TLS}        
+@cindex @acronym{TLS}
 @dfn{@acronym{SSL}} refers to a protocol called @dfn{secure sockets layer},
 which allows you to securely communicate with a mail server using encryption
 technology.  A newer version of the same protocol is called
@@ -984,7 +985,7 @@ establish a port-forwarded connection to the mail server.  (SSH must be able
 to authenticate without a password, which means you must be using .shosts
 authentication or RSA.)
 
-@var{HOST} is the host name of the mail server.  
+@var{HOST} is the host name of the mail server.
 
 @cindex port, TCP
 @var{PORT} is the TCP port number to connect to.  The normal port
@@ -1066,7 +1067,7 @@ machine HOST login USER password PASSWORD port PORT
 
 @noindent where HOST, USER, PASSWORD and PORT are as detailed above.
 Ensure that the variable @code{auth-sources} is customized to refer to
-your authinfo file.  
+your authinfo file.
 @xref{Help for users,, Help for users, auth , Emacs auth-source}.
 Then VM will read passwords from the file and you
 don't need to type them in when accessing mail servers.
@@ -1168,7 +1169,7 @@ need to specify the password for @acronym{POP} accounts in this definition.
 @node @acronym{IMAP} Folders,, @acronym{POP} Folders, @acronym{POP} and @acronym{IMAP} Folders
 @unnumberedsubsec @acronym{IMAP} Folders
 @cindex @acronym{IMAP}
-@cindex message attributes 
+@cindex message attributes
 @cindex message labels
 
 @findex vm-visit-imap-folder
@@ -1184,7 +1185,7 @@ Here, ``account-name'' is the name of an @acronym{IMAP} account declared in
 @vindex vm-imap-folder-cache-directory
 When you visit an @acronym{IMAP} folder, VM will
 download copies of the messages that it finds there for you to read.
-These messages are saved locally in a cache folder on the disk, in the 
+These messages are saved locally in a cache folder on the disk, in the
 directory specified by @code{vm-imap-folder-cache-directory} (or
 @code{vm-folder-directory} if the former is not defined).
 @vindex vm-imap-folder-cache-directory
@@ -1207,8 +1208,7 @@ The variable's value should be an associative list of the form:
  ((@var{IMAPDROP} @var{NAME}) ...)
 @end example
 
-@var{IMAPDROP} is an @acronym{IMAP} maildrop specification (@ref{maildrop
-  specification}). 
+@var{IMAPDROP} is an IMAP maildrop specification (@ref{maildrop specification}).
 
 @var{NAME} is a string that should give a less cumbersome name that you
 will use to refer to this maildrop when using @code{vm-visit-imap-folder}.
@@ -1313,7 +1313,7 @@ them.  So, the changes made to the folders will be lost after you quit
 VM.  If you set it to @code{nil}, then VM refrains from reading and
 writing the Thunderbird status flags.  In this case, the changes made to
 the folders are visible inside VM even after revisiting, but they will have
-no effect for Thunderbird.  
+no effect for Thunderbird.
 
 WARNING: Keep in mind that all this applies to changes to message
 attributes only.  If you @i{expunge} a folder, then the deleted messages
@@ -1336,7 +1336,7 @@ saving messages will be taken from the variable
 directory where Thunderbird stores its folders.  The folders visited
 using @code{M-x vm-visit-folder} will continue to be found in
 @code{vm-folder-directory}, thus allowing you to manage the two spaces
-separately. 
+separately.
 
 If, on the other hand, you want to maintain a single space where VM
 and Thunderbird can jointly operate, then you should set the variable
@@ -1427,7 +1427,7 @@ spool, it is possible that the new mail might get retrieved into
 another mail client and your ``Mail'' indicator won't reflect the
 situation.  If you need to be particular about new mail in such a
 situation, then you should set the variable
-@code{vm-mail-check-always}. 
+@code{vm-mail-check-always}.
 
 @node Crash Recovery,, Getting New Mail, Starting Up
 @section Crash Recovery
@@ -1818,14 +1818,14 @@ faces}.)
 @vindex vm-word-wrap-paragraphs
 Sometimes you will receive messages that contain lines that are
 too long to fit on your screen without wrapping.  Setting
-@code{vm-word-wrap-paragraphs} to t will cause VM to use the 
+@code{vm-word-wrap-paragraphs} to t will cause VM to use the
 @file{longlines.el} library by Grossjohann, Schroeder and Yidong to
 carry out word wrapping.  You must have this library installed
 somewhere on your @code{load-path}.  Another way to deal with the
 problem is to use the @code{visual-line-mode} in Emacs 23.  You can
 activate it automatically for viewing messages by adding the function
 @code{turn-on-visual-line-mode} to the
-@code{vm-presentation-mode-hook}. 
+@code{vm-presentation-mode-hook}.
 
 If you are unable to use either of these solutions, then you can use
 Emacs's paragraph filling facility.  If you set
@@ -1932,7 +1932,7 @@ those buttons.
 
 After decoding you will see either the decoded @acronym{MIME} objects or
 button lines that must be activated to attempt display of the
-@acronym{MIME} object.  
+@acronym{MIME} object.
 
 @vindex vm-mime-auto-displayed-content-types
 @vindex vm-mime-auto-displayed-content-type-exceptions
@@ -1983,7 +1983,7 @@ used move to particular buttons within the message presentation.
 @kindex $ w
 @kindex $ p
 @kindex $ d
-@kindex $ e  
+@kindex $ e
 @findex vm-mime-reader-map-pipe-to-command
 @findex vm-delete-mime-object
 @findex vm-mime-reader-map-display-using-default
@@ -2030,7 +2030,7 @@ directory to save the attachments in.  The @acronym{MIME} attachments can also
 be deleted directly from the message bodies with @kbd{$ d}
 (@code{vm-delete-mime-object}).  The variable
 @code{vm-mime-confirm-delete} controls whether a confirmation is asked
-for.  
+for.
 
 It is a good idea to use @code{vm-mime-delete-after-saving} to delete
 saved attachments instead of deleting them manually, because with the
@@ -2116,7 +2116,7 @@ variable.
 
 @vindex vm-mime-internal-content-type-exceptions
 The variable @code{vm-mime-internal-content-type-exceptions} serves as
-the exception list for @code{vm-mime-internal-content-types}.  Its value 
+the exception list for @code{vm-mime-internal-content-types}.  Its value
 should be a list of types that should not be displayed internally.
 
 @cindex @acronym{HTML}
@@ -2128,15 +2128,15 @@ displayed in Emacs using a variety of packages.  VM knows about:
 @cindex w3m
 @cindex w3
 @multitable @columnfractions .15 .85
-@item lynx   
+@item lynx
   @tab The @command{lynx} browser used externally to convert @acronym{HTML}
   to plain text
-@item w3m    
+@item w3m
   @tab The @command{w3m} browser used externally to convert @acronym{HTML}
   to plain text
-@item emacs-w3 
+@item emacs-w3
   @tab  The @samp{Emacs/W3} browser used internally in Emacs
-@item emacs-w3m 
+@item emacs-w3m
   @tab  The @samp{Emacs/W3M} browser used internally in Emacs
 @end multitable
 
@@ -2249,12 +2249,12 @@ As with the internal type list, there is an exception list that
 you can use to specify types that you do not want displayed
 externally.  When VM is considering whether it should
 automatically launch an external viewer, it will consult the
-variable @code{vm-mime-external-content-type-exceptions}.  If the 
+variable @code{vm-mime-external-content-type-exceptions}.  If the
 type to be displayed is listed, VM will not launch a viewer.
 This allows you to setup viewers for types that ordinarily you
 would not want VM to display or for types that you normally want
 to convert to some other type using @code{vm-mime-type-converter-alist}.
-You can still display such a type with an external viewer by using 
+You can still display such a type with an external viewer by using
 @kbd{$ e}.
 
 @vindex vm-mime-attachment-auto-suffix-alist
@@ -2293,7 +2293,7 @@ Example:
 )
 @end example
 
-@noindent VM will search the list for a matching type.  The suffix 
+@noindent VM will search the list for a matching type.  The suffix
 associated with the first type that matches will be used for the
 temporary filename.
 
@@ -2316,13 +2316,13 @@ function @code{image-type-available-p} with an image type such as
 @vindex vm-mime-auto-displayed-content-types
 Assuming that a particular image type, say @samp{tiff} is available,
 you can include its @acronym{MIME} type in
-@code{vm-mime-internal-content-types}, e.g., 
+@code{vm-mime-internal-content-types}, e.g.,
 @example
 (add-to-list 'vm-mime-internal-content-types "image/tiff")
 @end example
 You can also add the @acronym{MIME} type to the variable
 @code{vm-mime-auto-displayed-content-types} so that VM will
-automatically display all images of the type.  
+automatically display all images of the type.
 If the type is not included among the auto-displayed types, then the
 image is initially shown as a button with a thumbnail image.  Clicking on the
 button with the middle mouse button expands the image to its full size.
@@ -2494,22 +2494,22 @@ The first matching list element will be used.  Be sure to include the
 of causing error messages.
 
 @vindex vm-mime-charset-font-alist
-The variable @code{vm-mime-charset-font-alist} tells VM what font to use 
+The variable @code{vm-mime-charset-font-alist} tells VM what font to use
 to display a character set that cannot be displayed using
 the default face.  The value of this variable should be an
 assoc list of character sets and fonts that can be used to display
 them.  The format of the list is:
- 
-( (@var{CHARSET} . @var{FONT}) ...) 
- 
-@var{CHARSET} is a string naming a @acronym{MIME} registered character set such 
+
+( (@var{CHARSET} . @var{FONT}) ...)
+
+@var{CHARSET} is a string naming a @acronym{MIME} registered character set such
 as @samp{"iso-8859-5"}.
- 
+
 @var{FONT} is a string naming a font that can be used to display
 @var{CHARSET}.
- 
-An example setup might be: 
- 
+
+An example setup might be:
+
 @example
 (setq vm-mime-charset-font-alist
   '(
@@ -2597,19 +2597,19 @@ really have a specific @acronym{MIME} type.  For example, a JPEG image
 might be sent using @samp{application/octet-stream} type instead
 of @samp{image/jpeg}, which would be the correct type.  In many
 cases the filename sent along with the mistyped file
-(e.g. @file{foo.jpg}) suggests the correct type.  
+(e.g. @file{foo.jpg}) suggests the correct type.
 
 @vindex vm-infer-mime-types
 If the variable
-@code{vm-infer-mime-types} is set non-@code{nil}, VM will attempt to use 
-the filename sent with a @acronym{MIME} attachment to guess an attachment's 
+@code{vm-infer-mime-types} is set non-@code{nil}, VM will attempt to use
+the filename sent with a @acronym{MIME} attachment to guess an attachment's
 type if the attachment is of type @samp{application/octet-stream}.
 
 @vindex vm-infer-mime-types-for-text
 If the variable
 @code{vm-infer-mime-types-for-text} is set non-@code{nil}, VM will
 attempt to use filenames for attachments of type @samp{text/plain} as
-well. 
+well.
 
 @node Sending Messages, Saving Messages, Reading Messages, Top
 @chapter Sending Messages
@@ -2638,11 +2638,11 @@ the copy is prepended with the value of the variable
 with the text.  Point is left before the inserted text, the mark after.
 Any hook functions bound to @code{mail-yank-hooks} are run, after inserting
 the text and setting point and mark.  If a prefix argument is given,
-this tells VM: ignore @code{mail-yank-hooks}, don't set the mark, don't 
-prepend the 
+this tells VM: ignore @code{mail-yank-hooks}, don't set the mark, don't
+prepend the
 value of @code{vm-included-text-prefix} to every yanked line, and don't yank
 any headers other than those specified in
-@code{vm-visible-headers} and @code{vm-invisible-headers}.  
+@code{vm-visible-headers} and @code{vm-invisible-headers}.
 
 @item @code{M-x vm-yank-message-other-folder}
 This allows one to yank a message from a different folder than the
@@ -2656,19 +2656,19 @@ with C-c C-v.
 @vindex vm-send-using-mime
 @cindex drag and drop
 @item C-c C-a (@code{vm-attach-file}) or drag-and-drop a file
-Attaches a file to the composition.  When you send the message, VM 
+Attaches a file to the composition.  When you send the message, VM
 will insert the file and @acronym{MIME} encode it.  The variable
 @code{vm-send-using-mime} must be set non-@code{nil} for this command to work.
-You will be asked for the file's type, and a brief description of 
+You will be asked for the file's type, and a brief description of
 the attachment.  The description is optional.  If the file's type
 is a text type, you will also be asked for the character set
 in which the text should be displayed.
 The new attachment will appear as a highlighted tag in the
 composition buffer.  You can use mouse button 3 on this tag
 to set the default content disposition of the attachment.  The
-content disposition gives a hint to the recipient's mailer how to 
-treat the attachment.  Specifically the disposition will indicate 
-whether the attachment should be displayed along with the message 
+content disposition gives a hint to the recipient's mailer how to
+treat the attachment.  Specifically the disposition will indicate
+whether the attachment should be displayed along with the message
 or saved to a file.  Any text in the composition that appears
 before the tag will appear in a @acronym{MIME} text part before the
 attachment when the message is encoded and sent.  Similarly, any
@@ -2765,7 +2765,7 @@ header lines that you can fill in.  The @code{From} header is usually
 standard and contains your email address.  You can have VM fill it in
 for you
 automatically by setting the variable @code{vm-mail-header-from}.  (It is
-@code{nil} by default.)  
+@code{nil} by default.)
 
 @vindex vm-mail-use-sender-address
 The variable @code{vm-mail-use-sender-address}, if set to @code{t}, asks VM
@@ -2779,7 +2779,7 @@ older message.)
 The variable
 @code{vm-mail-mode-hidden-headers} can be used to hide some of the
 header lines from the mail composition buffer.  By default, the
-headers ``References'' and ``X-Mailer'' are hidden. 
+headers ``References'' and ``X-Mailer'' are hidden.
 
 @vindex vm-mail-header-insert-date
 @vindex vm-mail-header-insert-message-id
@@ -2814,7 +2814,7 @@ composition and will analyze your message when you send it and
 * @acronym{MIME} preview::        Previewing a @acronym{MIME} message before sending.
 @end menu
 
-@node @acronym{MIME} attachments, @acronym{MIME} characters, Sending @acronym{MIME} Messages, Sending @acronym{MIME} Messages, 
+@node @acronym{MIME} attachments, @acronym{MIME} characters, Sending @acronym{MIME} Messages, Sending @acronym{MIME} Messages
 @unnumberedsec @acronym{MIME} attachments
 
 @kindex C-c C-a
@@ -2822,7 +2822,7 @@ composition and will analyze your message when you send it and
 To attach a file to your composition, use @kbd{C-c C-a}
 (@code{vm-attach-file}).  VM will ask you for the name of the
 file, its type, a brief description and its character set if it is a
-text attachment.  
+text attachment.
 
 An attachment will be represented in the composition as a tag line
 like this
@@ -2853,7 +2853,7 @@ disposition for all @acronym{MIME} types except @samp{application} and
 
 @kindex C-c C-b
 @findex vm-attach-buffer
-To attach a buffer instead of a file, use @kbd{C-c C-b} (normally 
+To attach a buffer instead of a file, use @kbd{C-c C-b} (normally
 bound to @code{vm-attach-buffer}.  You must not kill the
 buffer that you attach until after the message has been sent.
 
@@ -2868,7 +2868,7 @@ Alternatively, you can mark one or more messages in the parent folder
 before invoking this command.  All the marked messages will be
 attached as a digest in the outgoing message.
 
-@unnumberedsubsubsec Point-to-point attachment operations
+@unnumberedsubsec Point-to-point attachment operations
 
 @cindex point-to-point attachment operations
 A number of @dfn{point-to-point operations} allow you to attach objects
@@ -2920,7 +2920,7 @@ set.
 
 @vindex vm-mime-8bit-composition-charset
 If there are character codes in the composition greater than 128, the
-variable @code{vm-mime-8bit-composition-charset} tells VM what character 
+variable @code{vm-mime-8bit-composition-charset} tells VM what character
 set to assume when encoding the message.  The default is
 @samp{iso-8859-1}.
 
@@ -2958,7 +2958,7 @@ The internet standards specify that the header lines of messages should
 always be in 7 bit ASCII, even if the body of a message can use an
 8 bit character set.  If you use other non-ASCII characters in typing
 the headers then VM encodes their words using the @acronym{MIME} encoded-word
-syntax, which is of the form @code{=?charset?encoding?encoded text?=}.  
+syntax, which is of the form @code{=?charset?encoding?encoded text?=}.
 
 @vindex vm-mime-encode-headers-regexp
 @vindex vm-mime-encode-headers-type
@@ -2972,7 +2972,7 @@ encoding by setting the variable @code{vm-mime-encode-headers-type}.
 @vindex vm-mime-encode-words.regexp
 @vindex vm-mime-encode-headers-words-regexp
 The variables @code{vm-mime-encode-words.regexp} and
-@code{vm-mime-encode-headers-words-regexp} control what is 
+@code{vm-mime-encode-headers-words-regexp} control what is
 meant by a ``word'' for VM for the purpose of encoding.  By default, the
 words are those containing any 8 bit character and delimited by white
 space characters.
@@ -3057,7 +3057,7 @@ negative) @var{n-1} messages as well as the current message.  Also, all
 the reply commands set the ``replied'' attribute of the messages to
 which you are responding, but only when the reply is actually sent.  The
 reply commands can also be applied to marked messages. (@pxref{Marking
-Messages}.) 
+Messages}.)
 
 @vindex vm-reply-ignored-addresses
 If you are one of multiple recipients of a message and you use @kbd{f}
@@ -3120,9 +3120,9 @@ message is sent.  The format of the button in this case looks like:
 @vindex vm-mime-alternative-yank-method
 When citing a @code{multipart/alternative} @acronym{MIME} component, VM chooses the
 alternative specified by the variable
-@code{vm-mime-alternative-yank-method}.  It can 
+@code{vm-mime-alternative-yank-method}.  It can
 be defined similar to the variable
-@code{vm-mime-alternative-show-method}. (@pxref{multipart/alternative}.) 
+@code{vm-mime-alternative-show-method}. (@pxref{multipart/alternative}.)
 
 @vindex vm-fill-paragraphs-containing-long-lines-in-reply
 @vindex vm-fill-long-lines-in-reply-column
@@ -3144,7 +3144,7 @@ Alternatively, you can fill individual paragraphs manually using
 The method of @acronym{MIME} decoding for included text is relatively new in VM.
 The older methods are the inclusion of plain text, due to Kyle Jones,
 and the inclusion of text from the Presentation buffer, due to Robert
-Fenk. 
+Fenk.
 
 @vindex vm-included-mime-types-list
 @vindex vm-include-text-basic
@@ -3185,7 +3185,7 @@ the variables @code{vm-included-text-headers} and
 @section Forwarding Messages
 
 VM has four commands to forward messages: @kbd{z}
-(@code{vm-forward-message}), 
+(@code{vm-forward-message}),
 @kbd{Z} (@code{vm-forward-message-plain}),
 @kbd{@@} (@code{vm-send-digest}) and
 @kbd{B} (@code{vm-resend-message}).
@@ -3196,12 +3196,12 @@ VM has four commands to forward messages: @kbd{z}
 @kindex z
 Typing @kbd{z} (@code{vm-forward-message}) puts you into a VM Mail
 mode buffer just like @kbd{m}, except that the current message appears
-as the body of the message in the VM Mail mode buffer.  
+as the body of the message in the VM Mail mode buffer.
 
 @vindex vm-forwarding-digest-type
 The forwarded message is encapsulated as specified by the variable
 @code{vm-forwarding-digest-type}.  Recognized values are @code{nil}, "mime",
-"rfc934" and "rfc1153".  The default is "mime".  
+"rfc934" and "rfc1153".  The default is "mime".
 
 If @code{vm-forwarding-digest-type} is set to @code{nil}, the forwarded
 message is not encapsulated.  It is included in a plain text form.  Any
@@ -3227,7 +3227,7 @@ the variables @code{vm-forwarded-headers} and
 they are used differs based on the form of forwarding used.
 
 @itemize
-@item 
+@item
 For encapsulated forwarding, the default is to forward all
 the headers, but you can limit the forwarded headers by setting
 @code{vm-unforwarded-header-regexp} to a regular expression.  All the
@@ -3242,13 +3242,13 @@ latter is set to a regular expression, then the headers matching it are
 omitted.  Otherwise, only the headers listed in
 @code{vm-forwarded-headers-plain} are included.  The default settings
 forward only the headers ``From'', ``To'', ``Cc'', ``Subject'', ``Date'' and
-``In-Reply-To''. 
+``In-Reply-To''.
 @end itemize
 
 @findex vm-forward-message-all-headers
 The command @code{vm-forward-message-all-headers} forwards the
 message with all headers intact, irrespective of the values of these
-variables. 
+variables.
 
 @vindex vm-forwarding-subject-format
 If the variable
@@ -3390,7 +3390,7 @@ folders on the @acronym{IMAP} server.
 You can override the effect of @code{vm-imap-save-to-server} by using
 the specialized commands @code{vm-save-message-to-local-folder}
 and @code{vm-save-message-to-imap-folder}, which do what their names
-indicate. 
+indicate.
 
 @vindex vm-confirm-new-folders
 If the value of the variable @code{vm-confirm-new-folders} is
@@ -3425,7 +3425,7 @@ command.  There is a separate variable
 works like @code{vm-delete-after-saving} but applies to the @kbd{A}
 (@code{vm-auto-archive-messages}) command (see below).
 
-@unnumberedsubsec vm-auto-folder-alist
+@unnumberedsec vm-auto-folder-alist
 
 @vindex vm-auto-folder-alist
 The variable @code{vm-auto-folder-alist} is used to specify
@@ -3441,12 +3441,12 @@ list of the form:
 
 @noindent where @var{header-name} and @var{regexp} are strings, and
 @var{folder-name} is a string or an s-expression that evaluates to a
-string.  The value of @var{folder-name} can be 
+string.  The value of @var{folder-name} can be
 
 @itemize
-@item 
+@item
 the absolute path name of a local folder,
-@item 
+@item
 a relative path name -- relative to @code{vm-folder-directory} or the
 @code{default-directory} of the currently visited folder, whichever is
 non-nil, or
@@ -3458,7 +3458,7 @@ If any part of the contents of the message header named by
 @var{header-name} is matched by the regular expression
 @var{regexp}, VM will evaluate the corresponding
 @var{folder-name} and use the result as the default when
-prompting for a folder to save the message in.  
+prompting for a folder to save the message in.
 
 When @var{folder-name} is evaluated, the current buffer will contain only
 the contents of the header named by @var{header-name}.  It is safe to
@@ -3498,7 +3498,7 @@ prefix argument, confirmation will be requested for each save.
 Runs a shell command with some or all of the current message as input.
 By default, the entire message is used.  However, the leading and
 trailing message separator lines are not included.  When applied to
-multiple messages, the command is invoked on each message individually.@* 
+multiple messages, the command is invoked on each message individually.@*
 If invoked with one @t{C-u} the text portion of the message is used.@*
 If invoked with two @t{C-u}'s the header portion of the message is used.@*
 In invoked with three @t{C-u}'s the visible headers and the text
@@ -3520,7 +3520,7 @@ messages in the mbox format.  In contrast to
 @code{vm-pipe-message-to-command}, the leading and trailing separator
 lines are included.  This behaviour can be altered using the variables
 @code{vm-pipe-messages-to-command-start} and
-@code{vm-pipe-messages-to-command-end}. 
+@code{vm-pipe-messages-to-command-end}.
 @findex vm-pipe-messages-to-command-discard-output
 @kindex |n
 @item |n (@code{vm-pipe-messages-to-command-discard-output})
@@ -3566,7 +3566,7 @@ Flags all messages with the same subject as the current message (ignoring
 @kindex K
 @item K (@code{vm-kill-thread-subtree})
 Flags all messages in the thread subtree of the current message for
-deletion. 
+deletion.
 @findex vm-delete-duplicate-messages
 @item @code{vm-delete-duplicate-messages}
 Flags duplicate messages for deletion.  The duplicate messages are
@@ -3607,7 +3607,7 @@ confirmation is asked for.  So you should use this setting only if
 your normal workflow includes expunging messages as part of save.  The
 variable @code{vm-expunge-before-quit} can be similarly set to
 non-@code{nil} to cause VM to expunge deleted messages whenever you
-quit the folder.  
+quit the folder.
 
 @cindex vm-save-folder-no-expunge
 @cindex vm-quit-no-expunge
@@ -3810,7 +3810,7 @@ The message has been replied to.
 @end table
 
 @findex vm-set-message-attributes
-You can set and unset these attributes directly by using 
+You can set and unset these attributes directly by using
 @code{M-x vm-set-message-attributes}.  You will be prompted in the
 minibuffer for names of the attributes and you can enter them with
 completion.  Every attribute has an ``un-'' prefixed name you can use
@@ -4014,7 +4014,7 @@ subject lines.  Sorting them by date would sort them chronologically
 according to when the threads were initiated.  Sorting them by activity
 is a variant of the chronological order where the dates of latest
 activity are given prominence instead of the dates of the initial
-messages. 
+messages.
 
 @vindex vm-sort-subthreads
 Normally, thread-based grouping applies to entire threads as well as
@@ -4143,13 +4143,14 @@ The seventh is `e' or ` ', for messages that have been edited.
 @vindex vm-summary-attachment-indicator
 @item P
 indicator for a message with attachments.
-The variable @code{vm-summary-attachment-indicator} is the inserted
-string, by default a @kbd{$}. 
-@vindex vm-summary-postponed-indicator
+The variable
+@vindex vm-summary-attachment-indicator
+@code{vm-summary-attachment-indicator} is the inserted string, by default a @code{$}.
 @item p
-indicator for a postponed message. 
-The variable @code{vm-summary-postponed-indicator} is the inserted
-string, by default a @kbd{P}. 
+indicator for a postponed message.
+The variable
+@vindex vm-summary-postponed-indicator
+@code{vm-summary-postponed-indicator} is the inserted string, by default a @code{P}.
 @item c
 number of characters in message (ignoring headers)
 @item S
@@ -4260,7 +4261,7 @@ again, you can reuse the saved summary format.  Set the variable
 @vindex vm-summary-thread-indent-level
 @vindex vm-summary-maximum-thread-indentation
 When message threading is enabled (@pxref{Threading}),
-you will find that the 
+you will find that the
 Summary buffer has all related messages are grouped together and the
 subject titles are indented to show hierarchical relationships.
 Parent messages are displayed before their children and children are
@@ -4282,7 +4283,7 @@ non-@code{nil} in your VM init file.  Example:
 @noindent Do not use @code{setq}, as this will only set the value of
 the variable in a single buffer.  Once you've started VM you should
 not change the value of this variable.  Rather you should use
-@kbd{C-t} to control the thread display.  @xref{Threading}. 
+@kbd{C-t} to control the thread display.  @xref{Threading}.
 
 @unnumberedsubsec Manual control of thread indentation
 
@@ -4339,7 +4340,7 @@ collapsed.  The command @kbd{T}
 (@code{vm-toggle-thread}) allows you to expand a collapsed thread or
 collapse an expanded thread.  The commands @code{vm-expand-thread} and
 @code{vm-collapse-thread} implement the more specific versions of the
-function. 
+function.
 
 @vindex vm-summary-visible
 When threads are folded, not all messages in the threads are hidden.
@@ -4411,7 +4412,7 @@ extend to thread operations in this way.  They include deleting,
 undeleting, marking, unmarking, forwarding, saving/deleting
 attachments etc.  Replying to messages cannot be invoked as a thread
 operation, to prevent the accidental sending of replies to unintended
-recipients. 
+recipients.
 
 The thread operations can give rise to surprising behavior.  Even
 though it appears that an operation was invoked on a single message,
@@ -4421,7 +4422,7 @@ unconditionally.  A safer option is to set
 `vm-enable-thread-operations' to `ask'.  In that case, VM asks for
 confirmation every time an operation is applicable to all the messages
 in a collapsed thread.  You can override the confirmation dialog by
-giving a prefix argument `C-u' to your operation.  
+giving a prefix argument `C-u' to your operation.
 
 @node Summary Faces,, Thread Operations, Summaries
 @section Summary Faces
@@ -4585,10 +4586,10 @@ The command @code{vm-create-search-folder} (bound to @kbd{V C}) lets you
 interactively create a virtual folder from the messages of the current
 folder, using exactly one selector to choose the messages.  If you type
 @kbd{V C header @key{RET} greeting}, VM will create a folder containing only
-those 
+those
 messages that contain the string @samp{greeting} in one of its headers.
 @xref{Virtual Selectors}, for virtual selectors you can use for this
-purpose. 
+purpose.
 
 @findex vm-create-virtual-folder-of-threads
 @findex vm-create-search-folder-of-threads
@@ -4665,7 +4666,7 @@ text of messages.  The key binding @kbd{V t}
 (@code{vm-create-text-virtual-folder}) can be used to find all messages with
 the string.  This is more efficient than the @code{vm-isearch-forward}
 command (@pxref{Selecting Messages}) because it only searches in the text part
-of message bodies, not inside @acronym{MIME} attachments. 
+of message bodies, not inside @acronym{MIME} attachments.
 
 @node Defined Folders, Working with Virtual Folders, Search Folders, Virtual Folders
 @section Defined Virtual Folders
@@ -4765,7 +4766,7 @@ headers or the text portion of the message;
 @var{ARG} should be a regular expression.
 @item header-field
 matches messages if the header field named @var{ARG1} has text matching
-@var{ARG2}. 
+@var{ARG2}.
 @end table
 
 @unnumberedsubsubsec Selectors based on message headers
@@ -4791,7 +4792,7 @@ matches message if its addresses are in the @acronym{BBDB}.  With an optional
 first argument you can specify the address class (@code{authors} or
 @code{recipients}) .  With an optional second argument @code{t}, the
 selector checks only the first address specified in the message.
-Examples: 
+Examples:
 
 @example
 (in-bbdb authors)
@@ -4876,7 +4877,7 @@ matches message if it is not flagged.
 matches message if it has been replied to.
 @item answered
 matches message if it has been replied to.  Same as the @code{replied}
-selector. 
+selector.
 @item unreplied
 matches message if it has not been replied to.
 @item unanswered
@@ -4987,7 +4988,7 @@ selector.  Example:
 (thread (less-chars-than 1000))
 @end example
 @noindent matches threads if all their messages contain fewer than 1000
-characters. 
+characters.
 @end table
 
 @unnumberedsubsubsec Selectors based on context
@@ -5174,7 +5175,7 @@ the offline operation.  Similarly, @emph{all} the messages that may have
 been expunged in the cache folder are expunged on the server.
 
 @anchor{@acronym{UIDVALIDITY}}
-@unnumberedsubsec @acronym{UIDVALIDITY}
+@unnumberedsec @acronym{UIDVALIDITY}
 
 @cindex @acronym{UIDVALIDITY}
 Messages on an @acronym{IMAP} server have unique id numbers called UID's.
@@ -5271,7 +5272,7 @@ Setting @code{vm-frame-per-composition} non-@code{nil} causes VM to create a
 new frame for the composition buffer when you run any of VM's
 message composition commands.  E.g. @code{vm-reply-include-text},
 @code{vm-mail}, @code{vm-forward-message}.  When you finish editing the
-composition and send it, or when you kill the composition buffer, 
+composition and send it, or when you kill the composition buffer,
 the frame will be deleted.
 
 @vindex vm-frame-per-edit
@@ -5300,7 +5301,7 @@ When VM is deciding whether to create a new frame, it checks
 other existing frames to see if a buffer that it wants to display in a
 frame is already being displayed somewhere.  If so, then VM will
 not create a new frame.  If you don't want VM to search other
-frames, set the variable @code{vm-search-other-frames} to @code{nil}.  VM will 
+frames, set the variable @code{vm-search-other-frames} to @code{nil}.  VM will
 still search the currently selected frame and will not create a
 new frame if the buffer that it wants to display is visible there.
 
@@ -5371,7 +5372,7 @@ classes are:
     searching-message
 @end display
 
-When a VM command is executed, window configurations are searched 
+When a VM command is executed, window configurations are searched
 for as follows.  First, a command specific configuration is
 searched for.  If one is found, it is used.  Next a class
 configuration is searched for.  Not all commands are in command
@@ -5437,24 +5438,24 @@ is a match.
 @item compose
 The Compose button.  Clicking on this button runs the command
 @code{vm-toolbar-compose-command}.  This command is normally just an
-alias for the @code{vm-mail} command.  If you want the Compose button to 
+alias for the @code{vm-mail} command.  If you want the Compose button to
 do something else, redefine @code{vm-toolbar-compose-command} using
 either @code{fset} or @code{defun}.
 @item delete/undelete
-The Delete/Undelete button.  If the current message is marked for 
+The Delete/Undelete button.  If the current message is marked for
 deletion, this button displays as an Undelete button.  Otherwise
 it displays as a Delete button.
 @item file
 The File button.  Clicking on this button runs the command
 @code{vm-toolbar-file-command}.  This command is normally just an
-alias for the @code{vm-mail} command.  If you want the File button to 
+alias for the @code{vm-mail} command.  If you want the File button to
 do something else, redefine @code{vm-toolbar-file-command} using
 either @code{fset} or @code{defun}.
 @item getmail
 The Get Mail button.  Clicking on this button runs the command
 @code{vm-toolbar-getmail-command}.  This command is normally just an
 alias for the @code{vm-get-new-mail} command.  If you want the
-Get Mail button to 
+Get Mail button to
 do something else, redefine @code{vm-toolbar-getmail-command} using
 either @code{fset} or @code{defun}.
 @item help
@@ -5462,10 +5463,10 @@ The Helper button.  Clicking on this button runs the command
 @code{vm-toolbar-helper-command}.  This command normally just runs
 @code{vm-help}, but it also does context specific things under certain
 conditions.  If the current message is a @acronym{MIME} message that needs
-decoding, the Helper button becomes the Decode @acronym{MIME} button.  If the 
-current folder has an auto-save file that appears to be the result 
-of an Emacs or system crash, the Helper button becomes the Recover 
-button.  Clicking on the Recover button runs @code{vm-recover-folder}, 
+decoding, the Helper button becomes the Decode @acronym{MIME} button.  If the
+current folder has an auto-save file that appears to be the result
+of an Emacs or system crash, the Helper button becomes the Recover
+button.  Clicking on the Recover button runs @code{vm-recover-folder},
 so you can recover your folder from an existing auto-save file.
 @item mime
 The Decode @acronym{MIME} button.  Clicking on this button runs the command
@@ -5474,26 +5475,26 @@ alias for the @code{vm-decode-mime-message} command.
 @item next
 The Next button.  Clicking on this button runs the command
 @code{vm-toolbar-next-command}.  This command is normally just an
-alias for the @code{vm-next-message} command.  If you want the Next button to 
+alias for the @code{vm-next-message} command.  If you want the Next button to
 do something else, redefine @code{vm-toolbar-next-command} using
 either @code{fset} or @code{defun}.
 @item previous
 The Previous button.  Clicking on this button runs the command
 @code{vm-toolbar-previous-command}.  This command is normally just an
-alias for the @code{vm-previous-message} command.  If you want the Previous button to 
+alias for the @code{vm-previous-message} command.  If you want the Previous button to
 do something else, redefine @code{vm-toolbar-previous-command} using
 either @code{fset} or @code{defun}.
 @item print
 The Print button.  Clicking on this button runs the command
 @code{vm-toolbar-print-command}.  This command is normally just an
 alias for the @code{vm-print-message} command.  If you want the
-Print button to 
+Print button to
 do something else, redefine @code{vm-toolbar-print-command} using
 either @code{fset} or @code{defun}.
 @item quit
 The Quit button.  Clicking on this button runs the command
 @code{vm-toolbar-quit-command}.  This command is normally just an
-alias for the @code{vm-quit} command.  If you want the Quit button to 
+alias for the @code{vm-quit} command.  If you want the Quit button to
 do something else, redefine @code{vm-toolbar-quit-command} using
 either @code{fset} or @code{defun}.
 @item reply
@@ -5506,7 +5507,7 @@ either @code{fset} or @code{defun}.
 @item visit
 The Visit button.  Clicking on this button runs the command
 @code{vm-toolbar-visit-command}.  This command is normally just an
-alias for the @code{vm-visit-folder} command.  If you want the Visit button to 
+alias for the @code{vm-visit-folder} command.  If you want the Visit button to
 do something else, redefine @code{vm-toolbar-visit-command} using
 either @code{fset} or @code{defun}.
 @item nil
@@ -5522,7 +5523,7 @@ the button that comes before and the button that comes after the
 integer.
 
 @vindex vm-toolbar-orientation
-The variable @code{vm-toolbar-orientation} controls on which side of the 
+The variable @code{vm-toolbar-orientation} controls on which side of the
 frame the toolbar is displayed.  E.g.
 
 @example
@@ -5587,7 +5588,7 @@ message.  E.g. reply, print, save, delete.
 This provides a menu button labelled @code{[Emacs]} that causes the
 menu bar to change to the global Emacs menu bar.  On that menu bar you
 will find a @code{[VM]} button that can return you to the VM menu
-bar.  
+bar.
 @item folder
 This is a menu of folder related commands.  You can visit a
 folder, save a folder, quit a folder and so on.
@@ -5649,7 +5650,7 @@ large message can take a long time.  Since @acronym{URL}s often occur near
 the beginning and near the end of messages, VM offers a way to
 search just those parts of a message for @acronym{URL}s.  The variable
 @code{vm-url-search-limit} specifies how much of a message to search.
-If @code{vm-url-search-limit} has a positive numeric value @var{N}, VM 
+If @code{vm-url-search-limit} has a positive numeric value @var{N}, VM
 will search the first @math{@var{N} / 2} characters and the last
 @math{@var{N} / 2} characters in the message for @acronym{URL}s.
 
@@ -5676,7 +5677,7 @@ highlighted @acronym{URL} in the body of a message, that @acronym{URL} will be s
 to the browser specified by @code{vm-url-browser}.
 @item button-3 (right button usually)
 Context Menu.  If the mouse pointer is over the contents of the
-From header, button-3 pops up a menu of actions that can be taken 
+From header, button-3 pops up a menu of actions that can be taken
 using the author of the message as a parameter.  For instance,
 you may want to create a virtual folder containing all the
 messages in the current folder written by this author.  If the
@@ -5721,7 +5722,7 @@ external browsers.
 
 VM has many hook variables that allow you to run functions when
 certain events occur.  Here is a list of the hooks and when they
-are run.  (If you don't write Emacs-Lisp programs you 
+are run.  (If you don't write Emacs-Lisp programs you
 can skip this chapter.)
 
 @table @code
@@ -5908,7 +5909,7 @@ List of hook functions to run when you quit VM.
 This applies to all VM quit commands, including @code{vm-quit-no-change}.
 So you should not include in this hook any functions that alter the folder.
 For automatically expunging deleted messages, set the variable
-@code{vm-expunge-before-quit}. 
+@code{vm-expunge-before-quit}.
 
 @item vm-summary-pointer-update-hook
 @vindex vm-summary-pointer-update-hook
@@ -5948,7 +5949,7 @@ List of hook functions that are run just after all menus are initialized.
 
 @item vm-mime-display-function
 @vindex vm-mime-display-function
-If non-@code{nil}, this should name a function to be called inside 
+If non-@code{nil}, this should name a function to be called inside
 @code{vm-decode-mime-message} to do the @acronym{MIME} display of the current
 message.  The function is called with no arguments, and at the
 time of the call the current buffer will be the @dfn{presentation
@@ -6021,7 +6022,7 @@ packages in your environment.
 Useful ways to customize VM.
 @section Reading messages
 
-@unnumberedsubsubsec Shrunken headers
+@unnumberedsubsec Shrunken headers
 
 @cindex headers, shrunken
 @vindex vm-enable-addons
@@ -6069,7 +6070,7 @@ part.  You can use the same function to change the method back to
 
 @section Saving messages and attachments
 
-@unnumberedsubsubsec Auto saving attachments
+@unnumberedsubsec Auto saving attachments
 
 Messages with attachments get bulky and increase the size of VM
 folders, slowing down VM.  The functions
@@ -6085,7 +6086,7 @@ attachments.  It saves the attachments in a subdirectory of
 @code{vm-mime-save-attachment-save-directory}, whose name is obtained
 by concating the ``from'', ``subject'' and ``date'' headers of the
 message.  This can be customized via the variable
-@code{vm-mime-auto-save-all-attachments-subdir}. 
+@code{vm-mime-auto-save-all-attachments-subdir}.
 
 You can save the attachments of all new messages automatically by
 putting @code{vm-mime-auto-save-all-attachments} in
@@ -6104,14 +6105,14 @@ putting @code{vm-mime-auto-save-all-attachments} in
 @cindex postponing message composition
 Sometimes, you might want to interrupt the composing of a message and
 continue it later.  This is called @dfn{postponing}.  The add-on called
-@samp{vm-pine} provides this 
-functionality. 
+@samp{vm-pine} provides this
+functionality.
 
 @findex vm-postpone-composition
 @kindex C-c C-d
 @vindex vm-postponed-folder
 In a message composition buffer, the command @key{C-c C-d}
-(@code{vm-postpone-composition}) 
+(@code{vm-postpone-composition})
 postpones the current composition.  The postponed message is stored in the
 folder specified in @code{vm-postponed-folder}.   (The default is a folder
 called ``postponed'').   When called with a prefix argument,
@@ -6137,7 +6138,7 @@ encoded.  This is a limitation of this package.
 @cindex Kyle Jones
 VM was developed by Kyle Jones, starting in early 1989.  The first
 public release of VM was version 4.10, released in June of that year.
-The original development environment was GNU Emacs 18.52.  
+The original development environment was GNU Emacs 18.52.
 
 @cindex Wonderworks
 The copyright for the code was retained by Kyle Jones.  Hence, the
@@ -6157,12 +6158,12 @@ also acquired a number of add-on's contributed by various developers,
 including himself, and included them in his distribution.  Kyle Jones
 agreed to hand over the maintenance of VM to Robert Fenk in February,
 2007.  Further releases were made by Robert Fenk under the @code{8.0.x}
-series. 
+series.
 
 @cindex Savannah
 All these releases are available from the new project page of VM hosted
 by Savannah, at the @acronym{URL}
-@uref{http://savannah.nongnu.org/projects/viewmail/}. 
+@uref{http://savannah.nongnu.org/projects/viewmail/}.
 According to the project page, ``this site exists to continue VM development
 after version 7.19 as a community project.''
 
@@ -6179,7 +6180,7 @@ The project code base is maintained at the Launchpad web site
 @uref{http://launchpad.net/vm}.  The ``VM Development Team'' can be
 reached here using the email address @email{vm@@lists.launchpad.net}.
 
-@unnumberedsubsec Savannah project site
+@unnumberedsec Savannah project site
 
 The changes made in each of the releases is described in the @samp{NEWS}
 file, which can be found in the source code repository.  The changes made
@@ -6197,7 +6198,7 @@ the @code{Source Code} menu.  The @code{Use Bazaar} entry in the menu
 takes you to a page that lists various version of VM source code, and
 gives instructions for downloading it via @samp{Bazaar} (@code{bzr}).
 
-@unnumberedsubsec Technical support
+@unnumberedsec Technical support
 
 VM has a dedicated usenet newsgroup @code{gnu.emacs.vm.info} and a
 gmane newsgroup @code{gmane.emacs.viewmail}, in which the developers
@@ -6220,13 +6221,13 @@ alternative approaches to narrow down the problem.
 
 The best way to report bugs is via the Launchpad bug tacker.  See below.
 
-@unnumberedsubsec Get Involved
+@unnumberedsec Get Involved
 
 VM is now supported and maintained by the user community.  So, as an
-active user, your participation is key to keep the project going.  
+active user, your participation is key to keep the project going.
 
 Consider registering as a user of the Launchpad development site
-@uref{http://launchpad.net/vm}.  This 
+@uref{http://launchpad.net/vm}.  This
 allows you to communicate with the developers and other users using a
 private Launchpad email address.  In particular, you can contribute bug
 reports and participate in the bug report discussions.
@@ -6239,7 +6240,7 @@ To download the development version, identify the ``branch'' that you
 would like to download, and use Bazaar version control system with an
 appropriate Launchpad @acronym{URL}.  For example, the command
 @command{bzr get lp:vm} can be used to download the main development
-branch. 
+branch.
 
 You can also make change to the branch you have downloaded, and submit
 them to the developers for inclusion in the project.  The @code{README}
@@ -6249,7 +6250,7 @@ site, and submit your changes to that branch.  The developers can review
 and merge your branch with the main development when your changes
 are ready.
 
-@unnumberedsubsec Contributors
+@unnumberedsec Contributors
 
 Contributions to the code from the following members of the VM community
 are gratefully acknowledged:
@@ -6338,20 +6339,20 @@ Here are some of the VM features that its users find most valuable:
 VM's reliability and stability.
 @item
 Integration within Emacs, providing ease of editing and familiar key
-bindings. 
+bindings.
 @item
 Speed of usage facilitated by keyboard commands.
 @item
 Integration with @acronym{BBDB} for maintaining contacts and email addresses.
 @item
 VM-Pcrisis for managing multiple mail identities.
-@item 
+@item
 Integration with emacs-w3m for viewing @acronym{HTML} email.
 @item
 Comprehensive @acronym{MIME} support.
 @item
 Ability to operate on all attachments of a message, such as saving or
-deleting. 
+deleting.
 @item
 Interactive virtual folders (created by @code{V C}).
 @item
@@ -6368,7 +6369,7 @@ Some of the ideas being worked on for future extensions of VM are the
 following:
 
 @itemize
-@item 
+@item
 Ability to compose rich text email messages (in 'text/enriched' and
 'text/html' modes).
 @item
@@ -6422,7 +6423,7 @@ automatically included in the bug-report.
 @chapter VM Internals
 
 This section gives a sketchy overview of the VM internals for the
-developers/programmers. 
+developers/programmers.
 
 @menu
 * Folder Internals::      Structure of the folders
@@ -6474,7 +6475,7 @@ Three variants of the @code{mbox} format are recognized by VM, called
 @code{From_}, @code{BellFrom_} and @code{From_with-Content-Length}.
 In a @code{From_} type mbox, every message has a leading and trailing
 separator line, as indicated above.  In a @code{BellFrom_} type mbox,
-the trailing separator line can be missing.  (This is so that the 
+the trailing separator line can be missing.  (This is so that the
 mbox's from the old System V format can be handled.)  In a
 @code{From_with-Content-Length} type mbox, the @code{From} separator
 line stores the length of the message.  So, no trailing separator line
@@ -6505,7 +6506,7 @@ folder, VM attempts to put the cursor back at this position.
 @item
 @inindex X-VM-Last-Modified
 X-VM-Last-Modified.  The date and time at which the folder was last
-modified. 
+modified.
 @item
 @inindex X-VM-Message-order
 X-VM-Message-Order.  This header lists the order in which the messages
@@ -6513,7 +6514,7 @@ should be listed.
 @item
 @inindex X-VM-Labels
 X-VM-Labels. This header lists the message labels that have been used in
-the folder.  
+the folder.
 @item
 @inindex X-VM-VHeader
 X-VM-VHeader. This header lists the values of @code{vm-visible-headers}
@@ -6545,7 +6546,7 @@ server are listed.  In the normal cases, the variable is just nil in
 @acronym{IMAP} folders.)
 @end itemize
 
-@unnumberedsubsubsec Folder variables
+@unnumberedsubsec Folder variables
 
 Internal to Emacs, VM stores the folder as simply a text buffer.  However, it
 remembers a variety of data about the message contents in the buffer
@@ -6565,7 +6566,7 @@ the messages are stored: one of 'babyl, 'From_, 'BellFrom_,
 @inindex vm-folder-access-method
 @code{vm-folder-access-method}.  The method for accessing the server
 message store: 'pop for pop-folders and 'imap for imap-folders, and nil
-for all other folders. 
+for all other folders.
 @item
 @inindex vm-folder-access-data
 @code{vm-folder-access-data}.  A vector of data for accessing the server
@@ -6644,7 +6645,7 @@ bodies were fetched for viewing or other operations.
 @inindex vm-fetched-messages
 @code{vm-fetched-message-count}.  The number of messages in
 @code{vm-fetched-messages}.  An attempt is made to keep this below the
-@code{vm-fetched-message-limit}. 
+@code{vm-fetched-message-limit}.
 @item
 @inindex vm-mime-decoded
 @inindex @acronym{MIME}
@@ -6653,22 +6654,22 @@ display: @code{undecoded} if the message is shown in undecoded plain
 text form, @code{decoded} if the message is shown decoded, and
 @code{buttons} if the message is shown as a series of buttons for all
 its @acronym{MIME} components.  The @kbd{D} command cycles through these
-states. 
+states.
 @item
 @inindex vm-system-state
 @code{vm-system-state}.  The state of VM in a Folder buffer or
-Presentation buffer: 
+Presentation buffer:
 
 @itemize
-@item 
+@item
 @inindex previewing
 @code{previewing}.
 if a message is being previewed.
-@item 
+@item
 @inindex showing
 @code{showing}.
 if a full message is being shown.
-@item 
+@item
 @inindex reading
 @code{reading}.
 if message reading is in progress.
@@ -6680,15 +6681,15 @@ A message edit buffer is in state @code{editing}.
 A message composition buffer may be in one of these states:
 
 @itemize
-@item 
+@item
 @inindex forwarding
 @code{forwarding}.
 if a message is being forwarded.
-@item 
+@item
 @inindex replying
 @code{replying}.
 if a message is being replied to.
-@item 
+@item
 @inindex redistributing
 @code{redistributing}.
 if a message is being redistributed.
@@ -6726,7 +6727,7 @@ MAILDROP specification of the server folder.
 @code{pop-process} or @code{imap-process}.
 The Emacs process being used to communicate with the server for this
 folder.  (Each folder uses a separate process to avoid unwanted
-interference.) 
+interference.)
 @item
 @code{imap-uid-validity}.
 The @acronym{UIDVALIDITY} value of the @acronym{IMAP} folder.
@@ -6987,7 +6988,7 @@ edited-flag.  Flag to indicate if the message has been edited.
 @inindex redistributed-flag
 @item
 redistributed-flag.  Flag to indicate if the message has been
-redistributed. 
+redistributed.
 @end itemize
 
 @subsubheading Cached Data
@@ -7017,7 +7018,7 @@ byte-count.  The size of the message in bytes.
 weekday, monthday, month, year, hour, zone.  Data indicating the date of
 the message.
 @inindex full-name
-@item 
+@item
 full-name.  The full name of the author of the message.  This is a
 @acronym{MIME}-decoded string with text properties.
 @inindex from
@@ -7039,7 +7040,7 @@ string with text properties.
 vheaders-regexp.  A regular expression that can be used to find the
 start of the visible headers.  The headers must have been already
 ordered so that the visible headers are at the bottom of the headers
-section. 
+section.
 @inindex to
 @item
 to.  Addresses of the recipients of the message in a comma separated
@@ -7097,7 +7098,7 @@ imap-uid.  The @acronym{UID} of the message on the @acronym{IMAP} server.
 @inindex imap-uid-validity
 @item
 imap-uid-validity.  The @acronym{UIDVALIDITY} value of the message on the
-@acronym{IMAP} server. 
+@acronym{IMAP} server.
 @inindex spam-score
 @item
 spam-score.  The spam score of the message.
@@ -7110,13 +7111,13 @@ is non-nil.
 
 @inindex edit-buffer
 @itemize
-@item 
+@item
 edit-buffer.  If the message is being edited, this is the buffer being
 used.
 @inindex virtual-messages-sym
 @item
 virtual-messages-sym.  List of virtual messages mirroring the current real
-message, represented by an uninterned symbol written as ``<v>''. 
+message, represented by an uninterned symbol written as ``<v>''.
 @inindex stuff-flag
 @item
 stuff-flag.  Flag to indicates if the attribute changes have been
@@ -7175,7 +7176,7 @@ stripped from attribute values.  (An example is @code{(``attachment'',
 @inindex qdisposition
 @item
 @code{qdisposition}.  Like disposition, but the quotation marks are not
-stripped. 
+stripped.
 @inindex header-start
 @item
 @code{header-start}, @code{header-end}, @code{body-start} and
@@ -7193,7 +7194,7 @@ stored as properties of this symbol:
 @item
 @code{vm-mime-display-external-generic}.
 This property stores the id of the process used to externally display
-the @acronym{MIME} part as well as the name of the temporary file used. 
+the @acronym{MIME} part as well as the name of the temporary file used.
 @inindex vm-mime-display-internal-image-xxxx
 @item
 @code{vm-mime-display-internal-image-xxxx}.
@@ -7204,7 +7205,7 @@ a list with a number of other data items.
 @item
 @code{vm-image-modified}.
 This property stores a boolean flag indicating that the image has been
-modified. 
+modified.
 @inindex vm-mime-display-internal-audio/basic
 @item
 @code{vm-mime-display-internal-audio/basic}.
@@ -7219,7 +7220,7 @@ clip is stored.
 @code{message-symbol}.  A reference to the message that contains the @acronym{MIME}
 part.  Represented as a symbol (that is, an interned key into a hash
 table).  This is a different symbol from the real-message-sym of the
-message. 
+message.
 @inindex display-error
 @item
 @code{display-error}.  If the display of a @acronym{MIME} part fails, its error string is
@@ -7239,7 +7240,7 @@ this part, then this holds the original unconverted layout.
 @inindex vm-message-list
 @inindex vm-message-pointer
 Every Folder buffer has a @code{vm-message-list} and a
-@code{vm-message-pointer} list containing message data vectors.  
+@code{vm-message-pointer} list containing message data vectors.
 
 Every Presentation buffer also uses a @code{vm-message-pointer} list
 with a single message (the one being presented).  The message data
@@ -7256,7 +7257,7 @@ However, they have message descriptors for all the messages in
 location data vector, because only one message body can be stored in
 the Folder buffer, but have separate Soft data vectors.  (This allows,
 for instance, virtual folders to have their own threads, which could
-in general be different from the threads in the underlying folders.)  
+in general be different from the threads in the underlying folders.)
 The other sub-vectors are shared with the underlying real folders.  (In
 particular, the tokenized summary line is the same in the virual
 folders and their underlying folders.)
@@ -7269,7 +7270,7 @@ folders and their underlying folders.)
 @inindex summary line, tokenized
 @inindex tokenized summary line
 Generating a summary is quite a time-consuming operation.  VM uses a
-variety of tricks to speed up the generation of summaries.  
+variety of tricks to speed up the generation of summaries.
 
 The format of the summary lines is specified in the variable
 @code{vm-summary-line-format}.  The information that needs to go into
@@ -7291,18 +7292,18 @@ line for each message and caches it in the cached-data vector.
 The following forms of tokens are used in tokenized summary lines:
 
 @itemize
-@item 
+@item
 @code{number}.
 Stands for the message number in the linear order of the summary.
 @item
 @code{mark}.
 Stands for an indicator of message mark (whether the message is marked
 at present).
-@item 
+@item
 @code{thread-indent}.
 Stands for the indentation to be used for the message's summary
 depending on its position in the message thread.
-@item 
+@item
 @code{group-begin}, @code{group-end}.
 Brackets used to denote groups of items that might have particular
 formatting constraints.
@@ -7370,7 +7371,7 @@ Message threads required for threaded summaries are calculated using
 message ID's, which are unique when the message was originally
 composed.  However, VM may need to deal with multiple copies of the
 same message received via possibly different routes.  So, message ID's are
-not unique for messages inside VM.  
+not unique for messages inside VM.
 
 Messages composed as replies generally have an ``In-Reply-To'' header.
 The message mentioned in this header is referred to as the parent of
@@ -7460,7 +7461,7 @@ The list of all the messages in the folder that have this subject.
 @b{Building threads} involves calculating all the data stored with the
 @code{vm-thread-obarray} and @code{vm-thread-subject-obarray}.  These two
 collections of data are calculated in sequence, because the subject
-threads are based on the reference threads.  
+threads are based on the reference threads.
 
 @inindex thread-subtree
 @inindex thread-list
@@ -7598,13 +7599,13 @@ well as the buffer in which the command execution was initiated.
 The default menu bar of VM contains VM-specific menus, replacing the
 standard Emacs menus.  This is achieved by setting the buffer-specific
 menu bar to one in which the Emacs menus are @code{undefined} (at
-least in Gnu Emacs).  
+least in Gnu Emacs).
 
 VM computes its standard menu bar and stores it internally:
 
 @itemize
-@item 
-In Gnu Emacs, this is stored in the keymap @code{vm-mode-menu-map}. 
+@item
+In Gnu Emacs, this is stored in the keymap @code{vm-mode-menu-map}.
 @item
 In XEmacs ...
 @end itemize
@@ -7616,12 +7617,12 @@ standard Emacs menu bar.
 The computed menu bar is then installed depending on the setting of
 @code{vm-use-menus}.
 If the user selects the action to revert to the standard Emacs menu
-bar, the installation is easily reverted.  
+bar, the installation is easily reverted.
 
 @itemize
 @item
 In Gnu Emacs, the installation involves inserting a key binding for
-@code{menu-bar}. 
+@code{menu-bar}.
 @item
 In XEmacs, ...
 @end itemize
@@ -7631,7 +7632,7 @@ In XEmacs, ...
 Emacs menu bar, the function @code{vm-menu-toggle-menubar} is invoked,
 which installs a fresh menu bar retaining the standard Emacs menus.
 The same function is used to reinstall the dedicated VM menu bar when
-needed. 
+needed.
 
 @node Coding Systems, Virtual Folder Internals, User Interaction, Internals
 @section Coding Systems
@@ -7711,7 +7712,7 @@ data structure @code{m} and all the arguments for the virtual selector
 
 For example, the virtual selector @code{author} has a string argument,
 representing the author name.  The corresponding Lisp function is defined
-as: 
+as:
 
 @example
 (defun vm-vs-author (m author-name)
@@ -7727,7 +7728,7 @@ The @code{author} selector is then registered in four places:
 
 @itemize
 @inindex vm-virtual-selector-function-alist
-@item 
+@item
 The variable @code{vm-virtual-selector-function-alist}, which contains pairs
 of the form @samp{(@var{SELECTOR} . @var{FUNCTION})}.  For the @code{author}
 selector, the pair is @code{(author . vm-vs-author)}.
@@ -7777,13 +7778,13 @@ responsible for traversing the tree structure at each @acronym{MIME} part
 and displaying it appropriately.
 
 The function @code{vm-decode-mime-layout} goes through the following
-sequence of decisions: 
+sequence of decisions:
 
 @enumerate
 @item
 If the @acronym{MIME} part is a @code{multipart} type, then the subparts are
 displayed as needed.  If it is a single part, it proceeds as follows.
-@item 
+@item
 If the @acronym{MIME} part should not be displayed automatically, it is
 displayed as a button.  (An automatically displayed @acronym{MIME} type is one
 listed in @code{vm-mime-auto-displayed-content-types}
@@ -7818,7 +7819,7 @@ which has a number of properties associated with it:
 @itemize
 @item @code{vm-button}.
 Always @code{t}.
-@item @code{vm-mime-layout}.  
+@item @code{vm-mime-layout}.
 Gives the layout of the @acronym{MIME} part.
 @item @code{vm-mime-function}.
 The function that carries out the action represented by pressing the
@@ -7864,22 +7865,22 @@ The following properties are defined for attachment buttons:
 
 @itemize
 @item @code{vm-mime-object}.
-The object denoting the @acronym{MIME} attachment.  It is either 
+The object denoting the @acronym{MIME} attachment.  It is either
 
 @itemize
-@item 
-a string denoting a file name, 
 @item
-a buffer containing the file to be attached, 
+a string denoting a file name,
+@item
+a buffer containing the file to be attached,
 @item
 a list of the form (buffer, start, end, filename) indicating a region in a
-buffer, typically the Folder buffer, or 
+buffer, typically the Folder buffer, or
 @item
 @code{t} indicating that the attachment is another @acronym{MIME}
-object in a VM folder.  
+object in a VM folder.
 @end itemize
 
-@noindent 
+@noindent
 In the last case, the @code{vm-mime-layout}
 property describes the rest of the metadata.
 @item @code{vm-mime-type}.
@@ -7903,7 +7904,7 @@ Standard text property.
 @item @code{duplicable}.
 Set to @code{t} in XEmacs allowing the extent to be
 preserved under killing and yanking.
-@item @code{front-nonsticky} and @code{rear-nonsticky}.  
+@item @code{front-nonsticky} and @code{rear-nonsticky}.
 Standard stickiness of text properties in GNU Emacs.
 @end itemize
 
@@ -7966,12 +7967,12 @@ GNU Emacs 19 uses two distinct objects, "text properties" and
 are a superset of the union of the functionality of the two GNU Emacs
 data types. The full GNU Emacs 19 interface to text properties and
 overlays is supported in XEmacs (with extents being the underlying
-representation). 
+representation).
 
 Extents can be made to be copied into strings, and then restored, by
 kill and yank. Thus, one can specify this behavior on either "extents"
 or "text properties", whereas in GNU Emacs 19 text properties always
-have this behavior and overlays never do. 
+have this behavior and overlays never do.
 @end quotation
 
 While extents and overlays look similar on the surface, they differ
@@ -7994,7 +7995,7 @@ Another major differences between extents and overlays is that the
 beginning and ending of overlays are markers.  This has some
 advantages.  However, if a buffer has many overlays, normal editing
 operations must update all the overlay markers, which can be
-time-consuming.  
+time-consuming.
 
 The major applications of extents and overlays in VM are the following:
 
@@ -8028,7 +8029,7 @@ three timer tasks that get scheduled to occur at regular intervals:
 @item vm-flush-itimer-function
 Stores message attributes in the folder so that they will be saved
 when an auto-save is done.  This is controlled by the variable
-@code{vm-flush-interval}. 
+@code{vm-flush-interval}.
 @inindex vm-get-mail-itimer-function
 @item vm-get-mail-itimer-function
 Moves new mail from maildrops into the folder.  This is controlled by
@@ -8429,7 +8430,7 @@ when it starts in an interactive mode:
 Gnomovision version 69, Copyright (C) 19@var{yy} @var{name of author}
 Gnomovision comes with ABSOLUTELY NO WARRANTY; for details
 type `show w'.  This is free software, and you are welcome
-to redistribute it under certain conditions; type `show c' 
+to redistribute it under certain conditions; type `show c'
 for details.
 @end smallexample
 
@@ -8447,7 +8448,7 @@ necessary.  Here is a sample; alter the names:
 @group
 Yoyodyne, Inc., hereby disclaims all copyright
 interest in the program `Gnomovision'
-(which makes passes at compilers) written 
+(which makes passes at compilers) written
 by James Hacker.
 
 @var{signature of Ty Coon}, 1 April 1989
diff --git a/lisp/Makefile.in b/lisp/Makefile.in
index ea3453d..342f6dd 100755
--- a/lisp/Makefile.in
+++ b/lisp/Makefile.in
@@ -130,12 +130,14 @@ version.txt:
 # under Windows.  We remove the CRs.
 # Solaris 8's tr -d '\r' removes r's so we use '\015' instead.
 # the echo command can also emit CRs.
+# Since Debian compiles the files on the fly on the target machine,
+# Do not depend on the abslute file path of the source directory to exist
 vm-autoloads.el: $(SOURCES:%=@srcdir@/%)
 	-$(RM) -f $@
 	echo > $@
 	(build_dir="`pwd`"; cd "@srcdir@"; \
 	 "$(EMACS_PROG)" $(FLAGS) -l autoload \
-		-f vm-built-autoloads "@abs_builddir@/$@" "`pwd`")
+		-f vm-built-autoloads "`pwd`/$@" "`pwd`")
 	echo "(custom-add-load 'vm 'vm-cus-load)" | tr -d '\015' >> $@
 	echo "(setq vm-configure-datadir \"${datadir}/vm\")" | tr -d '\015' >> $@
 	echo "(setq vm-configure-pixmapdir \"${pixmapdir}\")" | tr -d '\015' >> $@
diff --git a/src/Makefile.in b/src/Makefile.in
index 437626f..ef773a6 100755
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -8,6 +8,8 @@ SOURCES = $(wildcard *.c)
 
 OBJECTS = $(SOURCES:.c=.o)
 
+MANS = $(wildcard *.1)
+
 ##############################################################################
 # location of required programms
 prefix = @prefix@
@@ -16,11 +18,13 @@ MKDIR = @MKDIR@
 RM   = @RM@
 INSTALL = @INSTALL@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
+INSTALL_DATA   = @INSTALL_DATA@
 
 prefix = @prefix@
 top_srcdir = @top_srcdir@
 srcdir = @srcdir@
 bindir= @bindir@
+mandir= @mandir@
 
 ##############################################################################
 all: $(SOURCES:.c=)
@@ -31,6 +35,11 @@ install:
 	  echo "Installing $$i in $(DESTDIR)$(bindir)" ;           \
           $(INSTALL_PROGRAM) $$i "$(DESTDIR)$(bindir)" ;           \
         done ;
+	@test -d $(DESTDIR)$(mandir)      ||                        \
+	    mkdir -p -m 0755 "$(DESTDIR)$(mandir)/man1";            \
+	 for i in $(MANS) ; do                                      \
+	   $(INSTALL_DATA) $$i "$(DESTDIR)$(mandir)/man1" ;         \
+	done
 	@echo VM helper binaries successfully installed\!
 
 ##############################################################################
diff --git a/src/base64-decode.1 b/src/base64-decode.1
new file mode 100644
index 0000000..4ba903c
--- /dev/null
+++ b/src/base64-decode.1
@@ -0,0 +1,50 @@
+.\"                             -*- Mode: Nroff -*- 
+.\" Copyright (C) 2000 Manoj Srivastava <srivasta@debian.org>.
+.\"
+.\" Permission is granted to make and distribute verbatim copies of
+.\" this manual provided the copyright notice and this permission notice
+.\" are preserved on all copies.
+.\" 
+.\" Permission is granted to copy and distribute modified versions of this
+.\" manual under the conditions for verbatim copying, provided that the entire
+.\" resulting derived work is distributed under the terms of a permission
+.\" notice identical to this one.
+.\" 
+.\" Permission is granted to copy and distribute translations of this manual
+.\" into another language, under the above conditions for modified versions,
+.\" except that this permission notice may be stated in a translation approved
+.\" by the Author.
+.\"
+.\" Author: Manoj Srivastava
+.\"
+.\" arch-tag: e94acb5a-38da-416b-b01d-9196c0836599
+.\"
+.TH BASE64\-DECODE 1 "Sep 2 2000" "Debian" "Debian GNU/Linux manual"
+.SH NAME 
+base64\-decode \- Fast BASE64 decoder
+.SH SYNOPSIS
+.B base64\-decode 
+< 
+.I base64\-encoded data
+> 
+.I converted output
+.SH DESCRIPTION
+The
+.B base64\-decode
+utility takes BASE64 data on the standard input and converts
+it to the  standard output. 
+.PP
+This manual page was written for the Debian GNU/Linux distribution
+because the original program does not have a manual page.
+.SH OPTIONS
+.B base64\-encode
+does not take any arguments or options.
+.SH BUGS
+None known.
+.SH SEE ALSO
+.I base64\-encode (1)
+.SH AUTHORS
+.B base64\-decode
+was written by Kyle Jones. and placed by him into the public domain.
+This manual page was written by Manoj Srivastava <srivasta@debian.org>,
+for the Debian GNU/Linux system.
diff --git a/src/base64-decode.c b/src/base64-decode.c
index d0d3b9a..1b026f7 100755
--- a/src/base64-decode.c
+++ b/src/base64-decode.c
@@ -4,6 +4,7 @@
 
 #include <stdlib.h>
 #include <stdio.h>
+#include <stdlib.h>
 
 #ifdef _WIN32
 #ifndef WIN32
@@ -19,10 +20,10 @@
 unsigned char alphabet[64] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
 
 int
-main()
+main(void)
 {
-	static char inalphabet[256], decoder[256];
-	int i, bits, c, char_count, errors = 0;
+    static char inalphabet[256], decoder[256];
+    int i, bits, char_count, errors = 0;
 
 #ifdef WIN32
 	_setmode( _fileno(stdout), _O_BINARY);
@@ -32,46 +33,62 @@ main()
 	inalphabet[alphabet[i]] = 1;
 	decoder[alphabet[i]] = i;
 	}
+#define BUFLEN 72*500 // must be multiple of 4
 
-	char_count = 0;
-	bits = 0;
-	while ((c = getchar()) != EOF) {
-	if (c == '=')
-	  break;
-	if (c > 255 || ! inalphabet[c])
-	  continue;
-	bits += decoder[c];
-	char_count++;
-	if (char_count == 4) {
-		putchar((bits >> 16));
-		putchar(((bits >> 8) & 0xff));
-		putchar((bits & 0xff));
-		bits = 0;
-		char_count = 0;
-	} else {
-		bits <<= 6;
-	}
-	}
-	if (c == EOF) {
-	if (char_count) {
-		fprintf(stderr, "base64 encoding incomplete: at least %d bits truncated",
-			((4 - char_count) * 6));
-		errors++;
-	}
-	} else { /* c == '=' */
-	switch (char_count) {
-	  case 1:
-		fprintf(stderr, "base64 encoding incomplete: at least 2 bits missing");
-		errors++;
-		break;
-	  case 2:
-		putchar((bits >> 10));
-		break;
-	  case 3:
-		putchar((bits >> 16));
-		putchar(((bits >> 8) & 0xff));
-		break;
-	}
-	}
-	exit(errors ? 1 : 0);
+    int len;
+    char buf[BUFLEN];
+    char outbuf[BUFLEN];
+
+    while(!feof(stdin)) {
+        unsigned char c;
+
+        int pos=0;
+        char *out=outbuf;
+        len=fread(buf, sizeof(c), BUFLEN, stdin);
+        if(!len) continue;
+
+cont_buffer:
+        char_count = 0;
+        bits = 0;
+        while(pos<len) {
+            c=buf[pos++];
+            if (c == '=')
+                break;
+            if (! inalphabet[c])
+                continue;
+            bits += decoder[c];
+            char_count++;
+            if (char_count == 4) {
+                *out++ = ((bits >> 16));
+                *out++ = (((bits >> 8) & 0xff));
+                *out++ = ((bits & 0xff));
+                bits = 0;
+                char_count = 0;
+            } else {
+                bits <<= 6;
+            }
+        }
+        switch (char_count) {
+            case 1:
+                fprintf(stderr, "base64-decode: base64 encoding incomplete: at least 2 bits missing");
+                errors++;
+                break;
+            case 2:
+                *out++ = ((bits >> 10));
+                break;
+            case 3:
+                *out++ = ((bits >> 16));
+                *out++ = (((bits >> 8) & 0xff));
+                break;
+            case 0:
+                break;
+            default:
+                fprintf(stderr, "base64-decode: base64 encoding incomplete: at least %d bits truncated",
+                        ((4 - char_count) * 6));
+        }
+        if(pos<len) // did not proceed the whole thing, continue
+            goto cont_buffer;
+        fwrite(outbuf, sizeof(char), (out-outbuf), stdout);
+    }
+    exit(errors ? 1 : 0);
 }
diff --git a/src/base64-encode.1 b/src/base64-encode.1
new file mode 100644
index 0000000..ba0e95a
--- /dev/null
+++ b/src/base64-encode.1
@@ -0,0 +1,51 @@
+.\"                             -*- Mode: Nroff -*- 
+.\" Copyright (C) 2000 Manoj Srivastava <srivasta@debian.org>.
+.\"
+.\" Permission is granted to make and distribute verbatim copies of
+.\" this manual provided the copyright notice and this permission notice
+.\" are preserved on all copies.
+.\" 
+.\" Permission is granted to copy and distribute modified versions of this
+.\" manual under the conditions for verbatim copying, provided that the entire
+.\" resulting derived work is distributed under the terms of a permission
+.\" notice identical to this one.
+.\" 
+.\" Permission is granted to copy and distribute translations of this manual
+.\" into another language, under the above conditions for modified versions,
+.\" except that this permission notice may be stated in a translation approved
+.\" by the Author.
+.\"
+.\" Author: Manoj Srivastava
+.\"
+.\" arch-tag: 6563f4a9-302a-4d17-986a-42be5fb1d1c9
+.\"
+.TH BASE64\-ENCODE 1 "Sep 2 2000" "Debian" "Debian GNU/Linux manual"
+.SH NAME 
+base64\-encode \- Fast Base 64 encoder
+.SH SYNOPSIS
+.B base64\-encode 
+< 
+.I input 
+> 
+.I base64\-encoded output
+.SH DESCRIPTION
+The
+.B base64\-encode
+utility takes arbitrary data on the standard input and converts
+it to BASE64 data on standard output. UNIX's newline convention is
+used, i.e. one ASCII control-j (10 decimal). 
+.PP
+This manual page was written for the Debian GNU/Linux distribution
+because the original program does not have a manual page.
+.SH OPTIONS
+.B base64\-encode
+does not take any arguments or options.
+.SH BUGS
+None known.
+.SH SEE ALSO
+.I base64\-decode (1)
+.SH AUTHORS
+.B base64\-encode
+was written by Kyle Jones. and placed by him into the public domain.
+This manual page was written by Manoj Srivastava <srivasta@debian.org>,
+for the Debian GNU/Linux system.
diff --git a/src/base64-encode.c b/src/base64-encode.c
index fd146fa..d9c6651 100755
--- a/src/base64-encode.c
+++ b/src/base64-encode.c
@@ -8,6 +8,7 @@
 
 #include <stdlib.h>
 #include <stdio.h>
+#include <stdlib.h>
 
 #ifdef _WIN32
 #ifndef WIN32
@@ -23,7 +24,7 @@
 unsigned char alphabet[64] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
 
 int
-main()
+main(void)
 {
 	int cols, bits, c, char_count;
 
diff --git a/src/qp-decode.1 b/src/qp-decode.1
new file mode 100644
index 0000000..a9a60d8
--- /dev/null
+++ b/src/qp-decode.1
@@ -0,0 +1,51 @@
+.\"                             -*- Mode: Nroff -*- 
+.\" Copyright (C) 2000 Manoj Srivastava <srivasta@debian.org>.
+.\"
+.\" Permission is granted to make and distribute verbatim copies of
+.\" this manual provided the copyright notice and this permission notice
+.\" are preserved on all copies.
+.\" 
+.\" Permission is granted to copy and distribute modified versions of this
+.\" manual under the conditions for verbatim copying, provided that the entire
+.\" resulting derived work is distributed under the terms of a permission
+.\" notice identical to this one.
+.\" 
+.\" Permission is granted to copy and distribute translations of this manual
+.\" into another language, under the above conditions for modified versions,
+.\" except that this permission notice may be stated in a translation approved
+.\" by the Author.
+.\"
+.\" Author: Manoj Srivastava
+.\"
+.\" arch-tag: cfe27e82-b7a5-4171-bef6-f7bc28306374
+.\"
+.TH QP\-DECODE 1 "Sep 2 2000" "Debian" "Debian GNU/Linux manual"
+.SH NAME 
+qp\-decode \- Fast Quoted Printable decoder
+.SH SYNOPSIS
+.B qp\-decode 
+< 
+.I qp\-encoded data
+> 
+.I converted output
+.SH DESCRIPTION
+The
+.B qp\-decode
+utility takes Quoted Printable data on the standard input and converts
+it to the  standard output. 
+.PP
+This manual page was written for the Debian GNU/Linux distribution
+because the original program does not have a manual page.
+.SH OPTIONS
+.B qp\-encode
+does not take any arguments or options.
+.SH BUGS
+None known.
+.SH SEE ALSO
+.I qp\-encode (1)
+.SH AUTHORS
+.B qp\-decode
+was written by Kyle Jones. and placed by him into the public domain.
+This manual page was written by Manoj Srivastava <srivasta@debian.org>,
+for the Debian GNU/Linux system.
+
diff --git a/src/qp-decode.c b/src/qp-decode.c
index 0d6eaa1..9861f7b 100755
--- a/src/qp-decode.c
+++ b/src/qp-decode.c
@@ -5,6 +5,7 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
+#include <stdlib.h>
 
 #ifdef _WIN32
 #ifndef WIN32
@@ -17,11 +18,11 @@
 #include <fcntl.h>
 #endif
 
-char *hexdigits  = "0123456789ABCDEF";
-char *hexdigits2 = "0123456789abcdef";
+const char *hexdigits  = "0123456789ABCDEF";
+const char *hexdigits2 = "0123456789abcdef";
 
 int
-main()
+main(void)
 {
     char line[2000], *start, *stop, *copy;
     char *d1, *d2, c;
@@ -90,7 +91,7 @@ main()
 		for (stop++; *stop && (*stop == ' ' || *stop == '\t'); stop++)
 		    ;
 	    } else {
-		fprintf(stderr, "Error: line %d: '%c' is something other than line break or hex digit after = in quoted-printable encoding\n", lineno, *stop);
+                fprintf(stderr, "Error: qp-decode: line %d: '%c' is something other than line break or hex digit after = in quoted-printable encoding\n", lineno, *stop);
 		putchar('=');
 		putchar(*stop);
 		stop++;
diff --git a/src/qp-encode.1 b/src/qp-encode.1
new file mode 100644
index 0000000..c3dc52b
--- /dev/null
+++ b/src/qp-encode.1
@@ -0,0 +1,51 @@
+.\"                             -*- Mode: Nroff -*- 
+.\" Copyright (C) 2000 Manoj Srivastava <srivasta@debian.org>.
+.\"
+.\" Permission is granted to make and distribute verbatim copies of
+.\" this manual provided the copyright notice and this permission notice
+.\" are preserved on all copies.
+.\" 
+.\" Permission is granted to copy and distribute modified versions of this
+.\" manual under the conditions for verbatim copying, provided that the entire
+.\" resulting derived work is distributed under the terms of a permission
+.\" notice identical to this one.
+.\" 
+.\" Permission is granted to copy and distribute translations of this manual
+.\" into another language, under the above conditions for modified versions,
+.\" except that this permission notice may be stated in a translation approved
+.\" by the Author.
+.\"
+.\" Author: Manoj Srivastava
+.\"
+.\"  arch-tag: bc2b7485-8846-4a92-9e54-8fd22a778663
+.\"
+.TH QP\-ENCODE 1 "Sep 2 2000" "Debian" "Debian GNU/Linux manual"
+.SH NAME 
+qp\-encode \- Fast Quoted Printable encoder
+.SH SYNOPSIS
+.B qp\-encode 
+< 
+.I input 
+> 
+.I qp\-encoded output
+.SH DESCRIPTION
+The
+.B qp\-encode
+utility takes arbitrary data on the standard input and converts
+it to Quoted Printable data on standard output.
+.PP
+This manual page was written for the Debian GNU/Linux distribution
+because the original program does not have a manual page.
+.SH OPTIONS
+.B qp\-encode
+does not take any arguments or options.
+.SH BUGS
+None known.
+.SH SEE ALSO
+.I qp\-decode (1)
+.SH AUTHORS
+.B qp\-encode
+was written by Kyle Jones. and placed by him into the public domain.
+This manual page was written by Manoj Srivastava <srivasta@debian.org>,
+for the Debian GNU/Linux system.
+
diff --git a/src/qp-encode.c b/src/qp-encode.c
index e5796d0..8014d02 100755
--- a/src/qp-encode.c
+++ b/src/qp-encode.c
@@ -8,6 +8,7 @@
 
 #include <stdlib.h>
 #include <stdio.h>
+#include <stdlib.h>
 
 #ifdef _WIN32
 #ifndef WIN32
@@ -20,10 +21,10 @@
 #include <fcntl.h>
 #endif
 
-char *hexdigits  = "0123456789ABCDEF";
+const char *hexdigits  = "0123456789ABCDEF";
 
 int
-main()
+main(void)
 {
 	int c;
 	int cols = 0;
-- 
2.0.0.rc0

